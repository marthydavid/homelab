defaultNamespace: cattle-monitoring-system
dependsOn:
  - name: rancher-charts-fleet-rancher-charts-01-crd-moni-9c89b
helm:
  releaseName: rancher-monitoring
  chart: rancher-monitoring
  repo: https://charts.rancher.io/
  version: "101.0.0+up19.0.3"
targetCustomizations:
- name: rke2
  clusterSelector:
    matchLabels:
      provider.cattle.io: rke2
      topology.kubernetes.io/region: budapest
      topology.kubernetes.io/zone: esxi-hp
  helm:
    version: "100.1.3+up19.0.3"
    valuesFiles:
      - rke2.yaml
- name: k3s
  clusterSelector:
    matchLabels:
      provider.cattle.io: k3s
      topology.kubernetes.io/region: budapest
      topology.kubernetes.io/zone: rpi
  helm:
    version: "100.1.3+up19.0.3"
    valuesFiles:
      - k3s.yaml
- name: nas
  clusterSelector:
    matchLabels:
      provider.cattle.io: k3s
      topology.kubernetes.io/region: pecs
      topology.kubernetes.io/zone: nas
  helm:
    version: "100.1.3+up19.0.3"
    valuesFiles:
      - nas.yaml
- name: sm5
  clusterSelector:
    matchLabels:
      provider.cattle.io: k3s
      topology.kubernetes.io/region: budapest
      topology.kubernetes.io/zone: sm5
  helm:
    version: "100.1.3+up19.0.3"
    valuesFiles:
      - sm5.yaml

diff:
  comparePatches:
  - apiVersion: admissionregistration.k8s.io/v1beta1
    kind: MutatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op":"remove", "path":"/webhooks"}
  - apiVersion: admissionregistration.k8s.io/v1beta1
    kind: MutatingWebhookConfiguration
    name: rancher-monitoring-admission
    jsonPointers:
    - "/webhooks"
  - apiVersion: admissionregistration.k8s.io/v1
    kind: MutatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op":"remove", "path":"/webhooks"}
  - apiVersion: admissionregistration.k8s.io/v1
    kind: MutatingWebhookConfiguration
    name: rancher-monitoring-admission
    jsonPointers:
    - "/webhooks"
  - apiVersion: admissionregistration.k8s.io/v1beta1
    kind: ValidatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op":"remove", "path":"/webhooks"}
  - apiVersion: admissionregistration.k8s.io/v1beta1
    kind: ValidatingWebhookConfiguration
    name: rancher-monitoring-admission
    jsonPointers:
    - "/webhooks"
  - apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op":"remove", "path":"/webhooks"}
  - apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    name: rancher-monitoring-admission
    jsonPointers:
    - "/webhooks"
  - apiVersion: monitoring.coreos.com/v1
    kind: Prometheus
    name: rancher-monitoring-prometheus
    namespace: cattle-monitoring-system
    operations:
    - {"op":"remove", "path":"/spec/paused"}
    - {"op":"remove", "path":"/spec/enableAdminAPI"}
    - {"op":"remove", "path":"/spec/listenLocal"}
    jsonPointers:
    - "/spec/paused"
    - "/spec/enableAdminAPI"
    - "/spec/listenLocal"
  - apiVersion: v1
    kind: Service
    name: rancher-monitoring-alertmanager
    namespace: cattle-monitoring-system
    operations:
    - {"op":"remove", "path":"/spec/selector/app"}
    jsonPointers:
    - "/spec/selector/app"